/*
 * This an is autogenerated file by Gibran parser and should not be modified 
 * manually unless you know what you're doing. Any modifications to this file
 * will subsequently be overridden by the next `gibran run` command.
 */
package {{.Name}}Broker

import (
        {{range .Imports}}
	  "{{.}}"
	{{end}}

        "{{.Path}}"
)

type {{.Name}}Broker interface {

        // Built-in methods for G map
        Add(string, string)
	Del(string)
	Get(string) string
	Set(string, string)

        // Built-in method for all identifiers
	Vars() *{{.Name}}.VarSet

        // Generated methods
        {{range .Methods}}
          {{.Name}}({{.ArgTypes}}) ({{.ReturnTypes}})
        {{end}}
}

func New() {{.Name}}Broker {
        delegate := &{{.Name}}.Delegate{
	        G: make(map[string][]string),
		VarSet: &{{.Name}}.VarSet{
		        {{range .VarSet}}
			  {{.VarName}}: {{.Name}}.{{.VarName}},
			{{end}}
		},

	}
        return {{.Name}}Broker(delegate)
}
